FROM python:3.10-slim

ENV PYTHONUNBUFFERED=1
ENV PIP_NO_CACHE_DIR=1

WORKDIR /app

# Instalar rasa-sdk primero (cambia poco)
RUN pip install --upgrade pip && \
    pip install rasa-sdk==3.6.2

# Copiar e instalar requirements (solo se reinstala si cambia)
COPY requirements.txt .
RUN pip install -r requirements.txt

# Copiar c√≥digo (cambia frecuentemente, va al final)
COPY actions/ ./actions/

EXPOSE 5055

CMD ["rasa", "run", "actions", "--port", "5055"]